@page "{id:int}"
@model ElectricVehicleDealer.Presentation.Pages.Products.DetailModel
@{
    Layout = "_StoreLayout";
    ViewData["Title"] = "Chi tiết sản phẩm EcoRide EV3 Sport";
}

<section class="store-section">
    <div class="store-container">
        <div class="section-header">
            <div>
                <h1>@Model.Vehicle?.Model</h1>
                <p>@Model.Vehicle?.Type</p>
            </div>
        </div>

        <div class="store-form">
            <div class="product-grid" style="grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));">
                <div class="product-card">
                    <figure>
                        <img src="/images/bike3.jpg" alt="@Model.Vehicle?.Model">
                    </figure>
                    <div class="product-tags">
                        <span class="product-tag">@Model.Vehicle?.Color</span>
                    </div>
                    <div class="product-info">
                        <h3>Giá bán lẻ đề xuất</h3>
                        <p class="price">@String.Format("{0:N0} ₫", Model.Vehicle?.Price)</p>
                    </div>
                    <button class="btn-primary"
                            type="button"
                            onclick="window.location.href='/cart?vehicleId=@Model.Vehicle?.VehicleId'">
                        Đặt cọc online
                    </button>
                    <button class="btn-secondary" type="button">Tính phương án trả góp</button>
                </div>

                <div class="product-card">
                    <h3>Thông số nổi bật</h3>
                    <div class="list-modern">
                        <div class="list-item">
                            <strong>Mẫu xe:</strong>
                            <span>@Model.Vehicle?.Model</span>
                        </div>
                        <div class="list-item">
                            <strong>Phân khúc:</strong>
                            <span>@Model.Vehicle?.Type</span>
                        </div>
                        <div class="list-item">
                            <strong>Màu sắc:</strong>
                            <span>@Model.Vehicle?.Color</span>
                        </div>
                    </div>
                </div>

                <div class="product-card">
                    <h3>Phân bổ xe theo trạm</h3>
                    <div class="station-list">
                        @if (Model.StationCars != null && Model.StationCars.Any())
                        {
                            foreach (var sc in Model.StationCars)
                            {
                                <div class="station-item">
                                    <h4>@sc.StationName</h4>
                                    <p><strong>Địa điểm:</strong> @sc.Location</p>
                                    <p><strong>Số lượng còn:</strong> @sc.Quantity</p>

                                    @if (sc.Quantity > 0)
                                    {
                                        <button class="btn-secondary" type="button">Đặt xe tại trạm này</button>
                                    }
                                    else
                                    {
                                        <button class="btn-disabled" disabled>Hết xe</button>
                                    }
                                </div>
                            }
                        }
                        else
                        {
                            <p>Hiện chưa có trạm nào có xe này trong kho.</p>
                        }
                    </div>
                </div>
            </div>
        </div>

        <div class="store-form" style="margin-top: 40px;">
            <h2 style="margin:0 0 16px;">Công nghệ dẫn đầu</h2>
            <p style="margin:0 0 24px;color:var(--store-text-subtle);">EcoRide EV3 Sport tích hợp hệ sinh thái dịch vụ, cập nhật OTA và quản lý xe thông minh qua ứng dụng EcoRide Connect.</p>
            <div class="product-grid">
                <div class="product-card">
                    <h3>Pin thể rắn 95 kWh</h3>
                    <p>Đạt mật độ năng lượng cao, tuổi thọ pin 1.000.000 km với công nghệ làm mát chủ động.</p>
                </div>
                <div class="product-card">
                    <h3>Driving Intelligence</h3>
                    <p>Hệ thống ADAS 3.0 với 12 camera và 6 radar, hỗ trợ tự lái cấp 3 trong phố.</p>
                </div>
                <div class="product-card">
                    <h3>Ứng dụng EcoRide</h3>
                    <p>Điều khiển xe từ xa, theo dõi pin, đặt lịch sạc và cập nhật phần mềm qua OTA.</p>
                </div>
            </div>
        </div>
    </div>
</section>
