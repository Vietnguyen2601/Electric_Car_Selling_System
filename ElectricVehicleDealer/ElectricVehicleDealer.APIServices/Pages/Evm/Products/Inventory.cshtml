@page "/evm/products/inventory"
@model PortalPageModel
@{
    ViewData["Title"] = "Điều phối tồn kho - EVM";
    ViewData["PageTitle"] = "Tồn kho & điều phối xe";
    ViewData["PageDescription"] = "Theo dõi tồn kho tập trung và phân phối xe tới từng đại lý dựa trên nhu cầu thực tế.";
}

@section PageActions {
    <button class="btn-primary-gradient">Điều phối mới</button>
    <button class="btn-secondary-soft">Tải báo cáo tồn kho</button>
}

<div class="panel">
    <div class="panel-header">
        <div>
            <h2>Tổng quan tồn kho</h2>
            <p>Trạng thái tồn kho theo khu vực và tốc độ luân chuyển.</p>
        </div>
    </div>
    <div class="panel-body grid-3">
        <div class="stat-card">
            <span>Tồn kho trung tâm</span>
            <h3>1.284 xe</h3>
            <span class="kpi-trend">-6% tuần qua</span>
        </div>
        <div class="stat-card">
            <span>Xe đang vận chuyển</span>
            <h3>184 xe</h3>
            <span class="badge">15 chuyến</span>
        </div>
        <div class="stat-card">
            <span>Backlog đại lý</span>
            <h3>248 xe</h3>
            <span class="badge warning">Cần bổ sung</span>
        </div>
    </div>
</div>

<div class="panel">
    <div class="panel-header">
        <div>
            <h2>Tồn kho theo khu vực</h2>
            <p>Chi tiết số lượng xe tại kho trung tâm và đại lý vùng.</p>
        </div>
    </div>
    <div class="panel-body">
        <table class="table-modern">
            <thead>
                <tr>
                    <th>Khu vực</th>
                    <th>Tồn kho trung tâm</th>
                    <th>Tồn kho đại lý</th>
                    <th>Đơn hàng chờ</th>
                    <th>Tốc độ tiêu thụ</th>
                    <th>Đề xuất</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Miền Bắc</td>
                    <td>320</td>
                    <td>260</td>
                    <td>58</td>
                    <td>27 ngày</td>
                    <td class="badge success">Đủ hàng</td>
                </tr>
                <tr>
                    <td>Miền Trung</td>
                    <td>160</td>
                    <td>98</td>
                    <td>62</td>
                    <td>19 ngày</td>
                    <td class="badge warning">Cần điều chuyển</td>
                </tr>
                <tr>
                    <td>Miền Nam</td>
                    <td>520</td>
                    <td>340</td>
                    <td>96</td>
                    <td>14 ngày</td>
                    <td class="badge success">Đang tăng trưởng</td>
                </tr>
                <tr>
                    <td>Tây Nguyên</td>
                    <td>84</td>
                    <td>52</td>
                    <td>12</td>
                    <td>34 ngày</td>
                    <td class="badge danger">Luân chuyển chậm</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<div class="split-2">
    <div class="panel soft">
        <div class="panel-header">
            <div>
                <h2>Lệnh điều phối</h2>
                <p>Tạo lệnh điều chuyển nhanh từ kho trung tâm tới đại lý.</p>
            </div>
        </div>
        <div class="panel-body">
            <div class="form-grid">
                <div class="form-control-modern">
                    <label>Khu vực gửi</label>
                    <select>
                        <option>Kho trung tâm Bắc Ninh</option>
                        <option>Kho trung tâm Bình Dương</option>
                        <option>Kho Đà Nẵng</option>
                    </select>
                </div>
                <div class="form-control-modern">
                    <label>Đại lý nhận</label>
                    <select>
                        <option>EcoRide Hà Nội</option>
                        <option>EcoRide Đà Nẵng</option>
                        <option>EcoRide Sài Gòn</option>
                        <option>EcoRide Cần Thơ</option>
                    </select>
                </div>
                <div class="form-control-modern">
                    <label>Mẫu xe</label>
                    <select>
                        <option>EcoRide EV3</option>
                        <option>EcoRide EV2</option>
                        <option>EcoRide EV1</option>
                        <option>EcoRide Cargo</option>
                    </select>
                </div>
                <div class="form-control-modern">
                    <label>Số lượng</label>
                    <input type="number" />
                </div>
            </div>
            <div class="panel-actions">
                <button class="btn-secondary-soft">Đặt lịch vận chuyển</button>
                <button class="btn-primary-gradient">Tạo lệnh điều phối</button>
            </div>
        </div>
    </div>

    <div class="panel">
        <div class="panel-header">
            <div>
                <h2>Trạng thái vận chuyển</h2>
                <p>Theo dõi tiến độ vận chuyển theo từng lệnh.</p>
            </div>
        </div>
        <div class="panel-body timeline">
            <div class="timeline-item">
                <h4>#SHIP-9812 · 18 xe EV2</h4>
                <p>Đã rời kho Bình Dương · ETA EcoRide Đà Nẵng 20/06</p>
            </div>
            <div class="timeline-item">
                <h4>#SHIP-9813 · 12 xe EV1</h4>
                <p>Đang kiểm tra tại trạm Đà Nẵng · Dự kiến giao 18/06</p>
            </div>
            <div class="timeline-item">
                <h4>#SHIP-9814 · 6 xe Cargo Fleet</h4>
                <p>Đã tới kho Cần Thơ · Chờ QC sáng 19/06</p>
            </div>
        </div>
    </div>
</div>

<div class="panel">
    <div class="panel-header">
        <div>
            <h2>Dự báo tồn kho</h2>
            <p>AI dự đoán tồn kho trong 6 tuần và gợi ý sản xuất.</p>
        </div>
    </div>
    <div class="panel-body">
        <div class="chart-placeholder">Biểu đồ dự báo tồn kho (đang chờ tích hợp)</div>
        <div class="list-modern">
            <div class="list-item">
                <strong>EV3 Sport</strong>
                <span>Nên sản xuất thêm 120 xe trong 4 tuần</span>
            </div>
            <div class="list-item">
                <strong>EV2 Touring</strong>
                <span>Điều chuyển 40 xe từ miền Bắc vào miền Nam</span>
            </div>
            <div class="list-item">
                <strong>EV1 Urban</strong>
                <span>Cần chiến dịch thúc đẩy tại Đà Nẵng</span>
            </div>
        </div>
    </div>
</div>
