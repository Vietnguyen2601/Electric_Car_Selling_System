@page
@model ElectricVehicleDealer.Presentation.Pages.Homepage.HomeModel
@using System
@using System.Linq
@inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor
@{
    Layout = null;
}

<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="utf-8" />
    <title>EcoRide - Hệ thống bán xe điện</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="~/css/Home/home.css" />
    <link rel="stylesheet" href="~/css/Home/footer.css" />
    <link rel="stylesheet" href="~/css/Home/header.css" />
</head>
<body>
    <header class="main-header">
        <a class="logo" href="/Home">EcoRide</a>
        <nav class="nav-left">
            <a href="/Home">Trang chủ</a>
            <a href="/Products">Sản phẩm</a>
            <a href="/About">Về chúng tôi</a>
            <a href="/Contact">Liên hệ</a>
        </nav>
        @{
            var username = HttpContextAccessor.HttpContext?.Session.GetString("AccountName");
            var roleData = HttpContextAccessor.HttpContext?.Session.GetString("AccountRoles") ?? string.Empty;
            var roles = string.IsNullOrWhiteSpace(roleData)
                ? Array.Empty<string>()
                : roleData.Split(',', StringSplitOptions.RemoveEmptyEntries)
                    .Select(role => role.Trim())
                    .Where(role => !string.IsNullOrEmpty(role))
                    .ToArray();
            bool isCustomer = roles.Any(role => string.Equals(role, "Customer", StringComparison.OrdinalIgnoreCase));
            bool canSeeDealerDashboard = roles.Any(role =>
                string.Equals(role, "Admin", StringComparison.OrdinalIgnoreCase) ||
                string.Equals(role, "Dealer", StringComparison.OrdinalIgnoreCase));
        }

        <div class="nav-right">
            @if (!string.IsNullOrEmpty(username))
            {
                if (isCustomer)
                {
                    <a href="/dashboard/customer" class="btn-dashboard">Customer Dashboard</a>
                }

                if (canSeeDealerDashboard)
                {
                    <a href="/dashboard/dealer" class="btn-dashboard">Dealer Dashboard</a>
                }

                <span>Xin chào, @username!</span>
                <a href="/store/logout" class="btn-logout">Đăng xuất</a>
            }
            else
            {
                <a href="/store/login">Đăng nhập</a>
                <a href="/store/register" class="btn-register">Đăng ký</a>
            }
        </div>

    </header>

    <main>
        <section class="hero">
            <div class="hero-content">
                <span class="eyebrow">Tương lai di chuyển</span>
                <h1>Trải nghiệm hành trình xanh với công nghệ dẫn đầu</h1>
                <p>Giải pháp xe điện thông minh giúp bạn đi xa hơn, tiết kiệm hơn và thân thiện với môi trường hơn.</p>
                <div class="hero-actions">
                    <a href="/Products" class="btn-primary">Khám phá ngay</a>
                    <a href="/Contact" class="btn-secondary">Đặt lịch lái thử</a>
                    <a href="/store/login" class="btn-outline">Đăng nhập khách hàng</a>
                </div>
                <div class="hero-stats">
                    <div class="stat-card">
                        <h3>150+</h3>
                        <p>Điểm sạc đối tác</p>
                    </div>
                    <div class="stat-card">
                        <h3>320km</h3>
                        <p>Quãng đường trung bình</p>
                    </div>
                    <div class="stat-card">
                        <h3>98%</h3>
                        <p>Khách hàng hài lòng</p>
                    </div>
                </div>
            </div>
            <div class="hero-glow"></div>
        </section>

        <section class="trusted-bar">
            <div class="trusted-item">Bảo hành pin 10 năm</div>
            <div class="trusted-item">Ứng dụng điều khiển thông minh</div>
            <div class="trusted-item">Dịch vụ cứu hộ 24/7</div>
            <div class="trusted-item">Trả góp 0% lãi suất</div>
        </section>

        <section class="feature-section">
            <div class="section-header">
                <h2>Vì sao chọn EcoRide</h2>
                <p>Thiết kế tối ưu trải nghiệm và hiệu suất cho hành trình của bạn.</p>
            </div>
            <div class="feature-grid">
                <article class="feature-card">
                    <span class="feature-icon">⚡</span>
                    <h3>Sạc siêu tốc</h3>
                    <p>Đạt 80% pin chỉ trong 20 phút với hệ thống sạc chuẩn CCS2.</p>
                </article>
                <article class="feature-card">
                    <span class="feature-icon">🔗</span>
                    <h3>Kết nối IoT</h3>
                    <p>Theo dõi xe theo thời gian thực và điều khiển từ xa qua ứng dụng EcoRide.</p>
                </article>
                <article class="feature-card">
                    <span class="feature-icon">🛡️</span>
                    <h3>An toàn chủ động</h3>
                    <p>Gói công nghệ ADAS hỗ trợ phanh khẩn cấp, giữ làn và kiểm soát hành trình.</p>
                </article>
            </div>
        </section>

        <section class="vehicles-section">
            <div class="section-header">
                <h2>Xe nổi bật</h2>
                <a href="/Products" class="link-action">Xem tất cả</a>
            </div>
            <div class="vehicle-grid">
                <article class="vehicle-card">
                    <figure>
                        <img src="/images/bike1.jpg" alt="EcoRide EV1">
                    </figure>
                    <div class="vehicle-info">
                        <h3>EcoRide EV1</h3>
                        <p>Thiết kế nhỏ gọn, hiệu năng cao với tầm hoạt động 280km.</p>
                        <div class="vehicle-meta">
                            <span>Pin 72kWh</span>
                            <span>4.8s 0-60 km/h</span>
                        </div>
                    </div>
                </article>
                <article class="vehicle-card">
                    <figure>
                        <img src="/images/bike2.jpg" alt="EcoRide EV2">
                    </figure>
                    <div class="vehicle-info">
                        <h3>EcoRide EV2</h3>
                        <p>Tối ưu đường dài, pin bền bỉ lên đến 150km mỗi lần sạc.</p>
                        <div class="vehicle-meta">
                            <span>Pin 82kWh</span>
                            <span>Hệ thống AWD</span>
                        </div>
                    </div>
                </article>
                <article class="vehicle-card">
                    <figure>
                        <img src="/images/bike3.jpg" alt="EcoRide EV3">
                    </figure>
                    <div class="vehicle-info">
                        <h3>EcoRide EV3</h3>
                        <p>Phong cách thể thao với công suất tối đa 320 mã lực.</p>
                        <div class="vehicle-meta">
                            <span>Pin 95kWh</span>
                            <span>Chế độ Track</span>
                        </div>
                    </div>
                </article>
            </div>
        </section>

        <section class="cta-section">
            <div class="cta-card">
                <h2>Sẵn sàng chuyển sang năng lượng sạch?</h2>
                <p>Đội ngũ tư vấn EcoRide sẽ giúp bạn lựa chọn chiếc xe phù hợp và hỗ trợ mọi thủ tục.</p>
                <div class="cta-actions">
                    <a href="/Register" class="btn-primary">Đăng ký thành viên</a>
                    <a href="/Contact" class="btn-outline">Liên hệ tư vấn</a>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 EcoRide | Mọi quyền được bảo lưu.</p>
    </footer>
</body>
</html>
