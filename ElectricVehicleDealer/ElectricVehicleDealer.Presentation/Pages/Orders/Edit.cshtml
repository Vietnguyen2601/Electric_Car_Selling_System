@page "{id:int}"
@model ElectricVehicleDealer.Presentation.Pages.Orders.EditModel

@section Head {
    <link rel="stylesheet" href="~/css/manage/crud.css" />
    <style>
        /* Override Bootstrap form-control color */
        .crud-form input.form-control,
        .crud-form select.form-control,
        .crud-form select.form-select,
        .crud-form textarea.form-control {
            color: #ffffff !important;
        }
        .crud-form input.form-control:focus,
        .crud-form select.form-control:focus,
        .crud-form select.form-select:focus,
        .crud-form textarea.form-control:focus {
            color: #ffffff !important;
        }
    </style>
}

@if (Model.Order is null)
{
    <section class="crud-page">
        <div class="crud-empty">Không tìm thấy đơn hàng.</div>
    </section>
}
else
{
    <section class="crud-page">
        <header class="crud-header">
            <div>
                <h2>Cập nhật đơn hàng</h2>
                <p>Điều chỉnh thông tin xử lý cho đơn hàng của khách <strong>@Model.Order.CustomerUsername</strong>.</p>
            </div>
            <div class="crud-actions">
                <a href="/dealer/sales/orders" class="crud-btn crud-btn--ghost">Quay lại danh sách</a>
            </div>
        </header>

        <form method="post" class="crud-form">
            <div class="crud-field">
                <label>Khách hàng</label>
                <input class="form-control" value="@Model.Order.CustomerUsername" readonly />
            </div>

            <div class="crud-form__grid">
                <div class="crud-field">
                    <label asp-for="Input.StaffId"></label>
                    <select asp-for="Input.StaffId" class="form-select" asp-items="Model.StaffOptions">
                        <option value="">-- Chọn nhân viên --</option>
                    </select>
                    <span asp-validation-for="Input.StaffId" class="text-danger"></span>
                </div>
                <div class="crud-field">
                    <label asp-for="Input.StationCarId"></label>
                    <select asp-for="Input.StationCarId" class="form-select" asp-items="Model.StationCarOptions">
                        <option value="">-- Chọn xe/trạm --</option>
                    </select>
                    <span asp-validation-for="Input.StationCarId" class="text-danger"></span>
                </div>
                <div class="crud-field">
                    <label asp-for="Input.OrderDate"></label>
                    <input asp-for="Input.OrderDate" type="datetime-local" class="form-control" />
                    <span asp-validation-for="Input.OrderDate" class="text-danger"></span>
                </div>
                <div class="crud-field">
                    <label asp-for="Input.TotalPrice"></label>
                    <input asp-for="Input.TotalPrice" class="form-control" />
                    <span asp-validation-for="Input.TotalPrice" class="text-danger"></span>
                </div>
                <div class="crud-field">
                    <label asp-for="Input.Status"></label>
                    <select asp-for="Input.Status" class="form-select">
                        <option value="Pending">Đang chờ xử lý</option>
                        <option value="Available">Đã nhận cọc</option>
                        <option value="Confirmed">Đã xác nhận</option>
                        <option value="Completed">Hoàn tất</option>
                        <option value="Cancelled">Đã hủy</option>
                    </select>
                    <span asp-validation-for="Input.Status" class="text-danger"></span>
                </div>
                <div class="crud-field">
                    <label asp-for="Input.PromotionId"></label>
                    <select asp-for="Input.PromotionId" class="form-select" asp-items="Model.PromotionOptions">
                        <option value="">-- Không áp dụng --</option>
                    </select>
                    <span asp-validation-for="Input.PromotionId" class="text-danger"></span>
                </div>
                <div class="crud-field">
                    <div class="form-check mt-4">
                        <input asp-for="Input.IsActive" class="form-check-input" />
                        <label asp-for="Input.IsActive" class="form-check-label"></label>
                    </div>
                </div>
            </div>

            <div class="crud-form__actions">
                <button type="submit" class="crud-btn">Lưu thay đổi</button>
                <a href="/dealer/sales/orders" class="crud-btn crud-btn--ghost">Huỷ</a>
            </div>
        </form>
    </section>
}

<partial name="_ValidationScriptsPartial" />
